---
title: 扩容检查
---

## 进行 `precheck.sh`，包括（🔨 可能需要自己写。）：
### rpm: expect, bc.
### 配置文件是否存在：`hosts.conf`, `auto.conf`. （🔨 不确定扩容之后是否应该添加到这两个文件中。）=> 此处需要我们自己的配置文件 [[add_target.conf]].
### kernel version.
## 进行 `config_network.sh`，其中有 Meta Network Checking 和 Storage Network Checking。
## 进行 `install_pafs.sh`，包含：
### 发送 yum repo.
### yum makecache.
### install pafs.
### (不需要安装 drbd.)
## 配置 raid：
### 是否必须有两个 NVME（或 SSD）组成一个 Raid 1。
### 手动指定两块盘。（⌛ 问帅哥是否需要自动。）
### 检查磁盘类型是否为 NVME 或 SSD，只有检查合格才能继续，否则退出。
#### 如果旧的是 NVME，新的是 SSD，这种情况是否允许？
### 参考 `Raid 部署` 对 raid 进行设置。
#### ⌛ 难道 `Raid 部署`最后没有做 Raid 吗？为什么还要在 `_config_disk.sh` 中为 meta 和 storage 做 raid？=> 并没有找到代码，应该是没有。
## 进行 `config_disk.sh`，该脚本没有仔细认真学习，先快速浏览。
### check_storage_type(){...}，检查 是否有正确个数的 nvme 块盘。
### 获取系统盘信息，查询时以排除。
### 检查磁盘大小等信息。
### 使用 `systemctl *.mount` 进行挂载。
## ~~DRBD 和 PCS 只在 mgmt 中进行，与扩容无关。~~
#### 手动指定两块盘？
####
---
title: 扩容检查
---

## 进行 `precheck.sh`，包括（🔨 可能需要自己写。）：
### rpm: expect, bc.
### 配置文件是否存在：`hosts.conf`, `auto.conf`. （🔨 不确定扩容之后是否应该添加到这两个文件中。）=> 此处需要我们自己的配置文件 [[add_target.conf]].
### kernel version.
## 进行 `config_network.sh`，其中有 Meta Network Checking 和 Storage Network Checking。
## 进行 `install_pafs.sh`，包含：
### 发送 yum repo.
### yum makecache.
### install pafs.
### (不需要安装 drbd.)
## 配置 raid：
### 是否必须有两个 NVME（或 SSD）组成一个 Raid 1。
### 手动指定两块盘。（⌛ 问帅哥是否需要自动。）
### 检查磁盘类型是否为 NVME 或 SSD，只有检查合格才能继续，否则退出。
#### 如果旧的是 NVME，新的是 SSD，这种情况是否允许？
### 参考 `Raid 部署` 对 raid 进行设置。
#### ⌛ 难道 `Raid 部署`最后没有做 Raid 吗？为什么还要在 `_config_disk.sh` 中为 meta 和 storage 做 raid？=> 并没有找到代码，应该是没有。
## 进行 `config_disk.sh`，该脚本没有仔细认真学习，先快速浏览。
### check_storage_type(){...}，检查 是否有正确个数的 nvme 块盘。
### 获取系统盘信息，查询时以排除。
### 检查磁盘大小等信息。
### 使用 `systemctl *.mount` 进行挂载。
## ~~DRBD 和 PCS 只在 mgmt 中进行，与扩容无关。~~